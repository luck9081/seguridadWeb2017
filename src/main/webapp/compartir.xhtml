<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	>

	<head>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
      <meta name="theme-color" content="#2196F3"/>

      <!-- FAVICON -->
      <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>

      <!-- TITLE  -->
      <title>OrganizeMe</title>

      <!-- CSS  -->
      <link type="text/css" rel="stylesheet" href="fonts/material-design-icons/material-icons.css"/>
      <link type="text/css" rel="stylesheet" href="css/font-awesome.min.css"/>
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"/>
      <link type="text/css" rel="stylesheet" href="css/animate.css"/>
      <link type="text/css" rel="stylesheet" href="css/estilo.css"/>

   </head>

   <body id="top" class="scrollspy sin-espaciado-inferior">

      <ui:include src="includes/preloader.xhtml" />
      <ui:include src="includes/nav.xhtml" />

      <!-- SECTION MAIN -->
      <div class="section scrollspy">

         <!-- Compartir Tarea -->
         <div class="row container animated zoomIn">

            <div class="col s12 m12 l9 offset-l1">
               <div class="tarjeta grey lighten-4">

                  <div class="row center">
                    <h3 class="span_h2 blue-text">Compartir</h3>
                  </div>

                  <ul class="collection subcategories-list">
                     <c:forEach var="colaboradorBean" items="${controller.listarUsuariosParaCompartir(param['idTarea'])}" varstatus="true">                        
                        <li class="collection-item avatar grey lighten-4">
	                        <i class="material-icons circle blue">assignment_ind</i>
	                        <p>
	                           <h:outputText value="#{colaboradorBean.getNombreColaborador()}"/>
	                        </p>
	                        <div class="secondary-content">
	                           <h:form>
	                               <c:choose>
		                               <c:when test="${colaboradorBean.isEstadoColaborador()}">
		                                  <h:commandLink action="#{controller.eliminarColaborador()}">
                                              <i class="material-icons red-text waves-effect">clear</i>
                                              <f:param name="idTarea" value="#{param['idTarea']}"/>
                                              <f:param name="nombreUsuario" value="#{colaboradorBean.getNombreColaborador()}"/>
                                          </h:commandLink>
		                               </c:when>
		                               <c:otherwise>
		                                  <h:commandLink action="#{controller.compartirTarea()}">
		                                      <i class="material-icons blue-text waves-effect waves-blue">share</i>
		                                      <f:param name="idTarea" value="#{param['idTarea']}"/>
		                                      <f:param name="nombreUsuario" value="#{colaboradorBean.getNombreColaborador()}"/>
		                                  </h:commandLink>
		                               </c:otherwise>
	                               </c:choose>
	                           </h:form>
	                        </div>
	                     </li>
                     </c:forEach>
                     
                     
                  </ul>

               </div>
            </div>
         </div>
                  
      </div>

   </body>

   <!-- SCRIPTS -->
   <script src="js/jquery-2.1.1.min.js"></script>
   <script src="js/materialize.min.js"></script>
   <script src="js/pre-loader.js"></script>
   <script src="js/init.js"></script>
   <script src="js/funciones.js"></script>

</html>
